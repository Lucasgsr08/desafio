<mvc:View
    controllerName="com.todoapp.controller.App"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    displayBlock="true"
    height="100%">
    
    <App id="app">
        <Page 
            title="游늶 Aplica칞칚o de Tarefas"
            showHeader="true"
            enableScrolling="true"
            backgroundDesign="Solid">
    
            <!-- Barra de Busca -->
            <subHeader>
                <Toolbar>
                    <SearchField
                        width="100%"
                        placeholder="Pesquisar tarefas por t칤tulo..."
                        search=".onSearch"
                        liveChange=".onLiveSearch"
                        showSearchButton="true"
                        value="{todoModel>/search}"/>
                </Toolbar>
            </subHeader>
            
            <!-- Conte칰do Principal -->
            <content>
                <VBox class="sapUiSmallMargin">
                    
                    <!-- Indicador de Carregamento -->
                    <BusyIndicator
                        id="busyIndicator"
                        text="Carregando tarefas..."
                        class="sapUiSmallMarginBottom"
                        visible="{todoModel>/busy}"/>
                    
                    <!-- Mensagem Informativa -->
                    <MessageStrip
                        text="Total: {todoModel>/totalCount} tarefas | P치gina {todoModel>/page} de {todoModel>/totalPages}"
                        type="Information"
                        showIcon="true"
                        visible="{= ${todoModel>/totalCount} > 0 }"/>
                    
                    <!-- Lista de Todos -->
                    <List
                        id="todoList"
                        items="{todoModel>/items}"
                        mode="SingleSelectMaster"
                        selectionChange=".onSelectionChange"
                        noDataText="Nenhuma tarefa encontrada. Clique em Sincronizar para carregar dados.">
                        
                        <!-- Header da Lista -->
                        <headerToolbar>
                            <OverflowToolbar>
                                <Title text="Tarefas" level="H2"/>
                                <ToolbarSpacer/>
                                <Button 
                                    icon="sap-icon://sort"
                                    text="Ordenar por {todoModel>/sortBy}"
                                    type="Transparent"
                                    press=".onSort"/>
                                <Button
                                    icon="sap-icon://accept"
                                    text="Alternar status"
                                    type="Transparent"
                                    press=".onToggleSelectedStatus"/>
                                <Button
                                    icon="sap-icon://add"
                                    text="Adicionar"
                                    type="Emphasized"
                                    press=".onAddTodo"/>
                                <Button
                                    icon="sap-icon://delete"
                                    text="Remover"
                                    type="Reject"
                                    press=".onRemoveTodo"/>
                            </OverflowToolbar>
                        </headerToolbar>
                        
                        <!-- Template para cada Item -->
                        <items>
                            <CustomListItem type="Active">
                                <HBox alignItems="Center" class="sapUiSmallMargin">
                                    <!-- Checkbox de Status -->
                                    <CheckBox
                                        selected="{todoModel>completed}"
                                        select=".onToggleComplete"
                                        enabled="true"
                                        tooltip="Marcar como conclu칤da/incompleta"/>
                                    
                                    <!-- Informa칞칫es do Todo -->
                                    <VBox class="sapUiSmallMarginBegin" width="100%">
                                        <ObjectIdentifier
                                            title="{todoModel>title}"
                                            titleActive="true"
                                            titlePress=".onViewDetails"/>
                                        <HBox>
                                            <Label text="Usu치rio:" design="Bold" class="sapUiTinyMarginEnd"/>
                                            <Text text="{todoModel>userId}"/>
                                            <Label text="ID:" design="Bold" class="sapUiTinyMarginBegin"/>
                                            <Text text="{todoModel>id}"/>
                                        </HBox>
                                    </VBox>
                                    
                                    <!-- Bot칚o de Detalhes -->
                                    <Button
                                        icon="sap-icon://display"
                                        type="Transparent"
                                        tooltip="Ver detalhes"
                                        press=".onViewDetails"/>
                                </HBox>
                            </CustomListItem>
                        </items>
                    </List>
                    
                    <!-- Controles de Pagina칞칚o -->
                    <Toolbar class="sapUiSmallMarginTop">
                        <ToolbarSpacer/>
                        
                        <!-- Bot칚o P치gina Anterior -->
                        <Button
                            icon="sap-icon://slim-arrow-left"
                            enabled="{= ${todoModel>/page} > 1 }"
                            tooltip="P치gina anterior"
                            press=".onPreviousPage"/>
                        
                        <!-- Informa칞칚o de P치gina -->
                          <Text text="P치gina {todoModel>/page} de {todoModel>/totalPages}" 
                              class="sapUiTinyMarginBegin"/>
                        
                        <!-- Bot칚o Pr칩xima P치gina -->
                        <Button
                            icon="sap-icon://slim-arrow-right"
                            enabled="{= ${todoModel>/page} &lt; ${todoModel>/totalPages} }"
                            tooltip="Pr칩xima p치gina"
                            press=".onNextPage"/>
                        
                        <!-- Seletor de Itens por P치gina -->
                        <Label text="Itens por p치gina:" class="sapUiTinyMarginBegin"/>
                        <Select
                            selectedKey="{todoModel>/pageSize}"
                            change=".onPageSizeChange"
                            width="80px">
                            <core:Item key="5" text="5"/>
                            <core:Item key="10" text="10"/>
                            <core:Item key="20" text="20"/>
                            <core:Item key="50" text="50"/>
                        </Select>
                    </Toolbar>
                </VBox>
            </content>
            
            <!-- Rodap칠 -->
            <footer>
                <Toolbar>
                    <ToolbarSpacer/>
                    <Text text="API Backend: http://localhost:5001" class="sapUiTinyMarginEnd"/>
                    <Text text="Vers칚o SAPUI5: 1.108.0"/>
                    <ToolbarSpacer/>
                </Toolbar>
            </footer>
        </Page>
    </App>
</mvc:View>