<mvc:View
    controllerName="com.todoapp.controller.App"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    displayBlock="true"
    height="100%">
    
    <!-- PÃ¡gina Principal -->
    <Page 
        title="ğŸ“‹ Todo Application"
        showHeader="true"
        enableScrolling="true"
        backgroundDesign="Solid">
        
        <!-- Header com botÃ£o de Sync -->
        <headerContent>
            <Button 
                icon="sap-icon://refresh"
                text="Sync"
                type="Emphasized"
                tooltip="Synchronize with external API"
                press=".onSync"/>
        </headerContent>
        
        <!-- Barra de Busca -->
        <subHeader>
            <Toolbar>
                <SearchField
                    width="100%"
                    placeholder="Search todos by title..."
                    search=".onSearch"
                    liveChange=".onLiveSearch"
                    showSearchButton="true"
                    value="{todoModel>/search}"/>
            </Toolbar>
        </subHeader>
        
        <!-- ConteÃºdo Principal -->
        <content>
            <VBox class="sapUiSmallMargin">
                
                <!-- Busy Indicator -->
                <BusyIndicator
                    id="busyIndicator"
                    text="Loading todos..."
                    class="sapUiSmallMarginBottom"
                    visible="{todoModel>/busy}"/>
                
                <!-- Mensagem Informativa -->
                <MessageStrip
                    text="Total: {todoModel>/totalCount} todos | Page {todoModel>/page} of {todoModel>/totalPages}"
                    type="Information"
                    showIcon="true"
                    class="sapUiSmallMarginBottom"
                    visible="{= ${todoModel>/totalCount} > 0 }"/>
                
                <!-- Lista de Todos -->
                <List
                    id="todoList"
                    items="{todoModel>/items}"
                    mode="SingleSelectMaster"
                    selectionChange=".onSelectionChange"
                    noDataText="No todos found. Click Sync to load data.">
                    
                    <!-- Header da Lista -->
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="Todos" level="H2"/>
                            <ToolbarSpacer/>
                            <Button 
                                icon="sap-icon://sort"
                                text="Sort by {todoModel>/sortBy}"
                                type="Transparent"
                                press=".onSort"/>
                        </OverflowToolbar>
                    </headerToolbar>
                    
                    <!-- Template para cada Item -->
                    <items>
                        <CustomListItem type="Active">
                            <HBox alignItems="Center" class="sapUiSmallMargin">
                                <!-- Checkbox de Status -->
                                <CheckBox
                                    selected="{todoModel>completed}"
                                    select=".onToggleComplete"
                                    enabled="true"
                                    tooltip="Mark as complete/incomplete"/>
                                
                                <!-- InformaÃ§Ãµes do Todo -->
                                <VBox class="sapUiSmallMarginBegin" width="100%">
                                    <ObjectIdentifier
                                        title="{todoModel>title}"
                                        class="{= ${todoModel>completed} ? 'completed-task' : '' }"
                                        titleActive="true"
                                        titlePress=".onViewDetails"/>
                                    <HBox>
                                        <Text text="User:" design="Bold" class="sapUiTinyMarginEnd"/>
                                        <Text text="{todoModel>userId}"/>
                                        <Text text="ID:" design="Bold" class="sapUiTinyMarginBegin sapUiTinyMarginEnd"/>
                                        <Text text="{todoModel>id}"/>
                                    </HBox>
                                </VBox>
                                
                                <!-- BotÃ£o de Detalhes -->
                                <Button
                                    icon="sap-icon://display"
                                    type="Transparent"
                                    tooltip="View Details"
                                    press=".onViewDetails"/>
                            </HBox>
                        </CustomListItem>
                    </items>
                </List>
                
                <!-- Controles de PaginaÃ§Ã£o -->
                <Toolbar class="sapUiSmallMarginTop">
                    <ToolbarSpacer/>
                    
                    <!-- BotÃ£o PÃ¡gina Anterior -->
                    <Button
                        icon="sap-icon://slim-arrow-left"
                        enabled="{= ${todoModel>/page} > 1 }"
                        tooltip="Previous page"
                        press=".onPreviousPage"/>
                    
                    <!-- InformaÃ§Ã£o de PÃ¡gina -->
                    <Text text="Page {todoModel>/page} of {todoModel>/totalPages}" 
                          class="sapUiTinyMarginBegin sapUiTinyMarginEnd"/>
                    
                    <!-- BotÃ£o PrÃ³xima PÃ¡gina -->
                    <Button
                        icon="sap-icon://slim-arrow-right"
                        enabled="{= ${todoModel>/page} < ${todoModel>/totalPages} }"
                        tooltip="Next page"
                        press=".onNextPage"/>
                    
                    <!-- Seletor de Itens por PÃ¡gina -->
                    <Label text="Items per page:" class="sapUiTinyMarginBegin"/>
                    <Select
                        selectedKey="{todoModel>/pageSize}"
                        change=".onPageSizeChange"
                        width="80px">
                        <core:Item key="5" text="5"/>
                        <core:Item key="10" text="10"/>
                        <core:Item key="20" text="20"/>
                        <core:Item key="50" text="50"/>
                    </Select>
                </Toolbar>
            </VBox>
        </content>
        
        <!-- RodapÃ© -->
        <footer>
            <Toolbar>
                <ToolbarSpacer/>
                <Text text="Backend API: http://localhost:5001" class="sapUiTinyMarginEnd"/>
                <Text text="SAPUI5 Version: 1.108.0"/>
                <ToolbarSpacer/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>